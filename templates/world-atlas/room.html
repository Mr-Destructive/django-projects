{% extends "world-atlas/index.html" %}
{% block body %}
    {% load static %}
    <h2>{{ name }}</h2>

<form id="chat-form">
    <input type="text" id="chat-message" placeholder="Enter your message here...">
    <button type="submit">Send</button>
</form>

    <script>
        const socket = new WebSocket(`ws://${window.location.host}/ws/socket-server/`);
    document.querySelector('#chat-form').addEventListener('submit', event => {
    event.preventDefault();
    const message = document.querySelector('#chat-message').value;
    socket.send(JSON.stringify({'message': message}));
    document.querySelector('#chat-message').value = '';
    });

    socket.onmessage = event => {
    const data = JSON.parse(event.data);
    console.log(data)
    document.querySelector('#chat-log').innerHTML += '<br>' + data.message;
    };

    </script>
{% endblock %}
